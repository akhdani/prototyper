goog.provide("ng.material.components.fabSpeedDial");goog.require("ng.material.components.fabActions");goog.require("ng.material.components.fabTrigger");goog.require("ng.material.core");(function(){"use strict";angular.module("material.components.fabSpeedDial",["material.core","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabSpeedDial",MdFabSpeedDialDirective).animation(".md-fling",MdFabSpeedDialFlingAnimation).animation(".md-scale",MdFabSpeedDialScaleAnimation);function MdFabSpeedDialDirective(){FabSpeedDialController.$inject=["$scope","$element","$animate"];return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:true,controller:FabSpeedDialController,controllerAs:"vm",link:FabSpeedDialLink};function FabSpeedDialLink(scope,element){element.prepend('<div class="md-css-variables"></div>')}function FabSpeedDialController($scope,$element,$animate){var vm=this;vm.open=function(){$scope.$apply("vm.isOpen = true")};vm.close=function(){$scope.$apply("vm.isOpen = false")};setupDefaults();setupListeners();setupWatchers();function setupDefaults(){vm.direction=vm.direction||"down";vm.isOpen=vm.isOpen||false}function setupListeners(){$element.on("mouseenter",vm.open);$element.on("mouseleave",vm.close)}function setupWatchers(){$scope.$watch("vm.direction",function(newDir,oldDir){$animate.removeClass($element,"md-"+oldDir);$animate.addClass($element,"md-"+newDir)});$scope.$watch("vm.isOpen",function(isOpen){var toAdd=isOpen?"md-is-open":"";var toRemove=isOpen?"":"md-is-open";$animate.setClass($element,toAdd,toRemove)})}}}function MdFabSpeedDialFlingAnimation(){function runAnimation(element){var el=element[0];var ctrl=element.controller("mdFabSpeedDial");var items=el.querySelectorAll(".md-fab-action-item");var variablesElement=el.querySelector(".md-css-variables");var startZIndex=variablesElement.style.zIndex;angular.forEach(items,function(item,index){var styles=item.style;styles.transform="";styles.transitionDelay="";styles.opacity=1;item.style.zIndex=items.length-index+startZIndex});if(!ctrl.isOpen){angular.forEach(items,function(item,index){var newPosition,axis;switch(ctrl.direction){case"up":newPosition=item.scrollHeight*(index+1);axis="Y";break;case"down":newPosition=-item.scrollHeight*(index+1);axis="Y";break;case"left":newPosition=item.scrollWidth*(index+1);axis="X";break;case"right":newPosition=-item.scrollWidth*(index+1);axis="X";break}item.style.transform="translate"+axis+"("+newPosition+"px)"})}}return{addClass:function(element,className,done){if(element.hasClass("md-fling")){runAnimation(element)}},removeClass:function(element,className,done){runAnimation(element)}}}function MdFabSpeedDialScaleAnimation(){var delay=65;function runAnimation(element){var el=element[0];var ctrl=element.controller("mdFabSpeedDial");var items=el.querySelectorAll(".md-fab-action-item");angular.forEach(items,function(item,index){var styles=item.style,offsetDelay=index*delay;styles.opacity=ctrl.isOpen?1:0;styles.transform=ctrl.isOpen?"scale(1)":"scale(0)";styles.transitionDelay=(ctrl.isOpen?offsetDelay:items.length-offsetDelay)+"ms"})}return{addClass:function(element,className,done){runAnimation(element)},removeClass:function(element,className,done){runAnimation(element)}}}})();ng.material.components.fabSpeedDial=angular.module("material.components.fabSpeedDial");