(function(window,angular,undefined){"use strict";angular.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",mdToolbarDirective);function mdToolbarDirective($$rAF,$mdConstant,$mdUtil,$mdTheming,$animate,$timeout){return{restrict:"E",controller:angular.noop,link:function(scope,element,attr){$mdTheming(element);if(angular.isDefined(attr.mdScrollShrink)){setupScrollShrink()}function setupScrollShrink(){var y=0;var prevScrollTop=0;var shrinkSpeedFactor=attr.mdShrinkSpeedFactor||.5;var toolbarHeight;var contentElement;var debouncedContentScroll=$$rAF.throttle(onContentScroll);var debouncedUpdateHeight=$mdUtil.debounce(updateToolbarHeight,5*1e3);scope.$on("$mdContentLoaded",onMdContentLoad);function onMdContentLoad($event,newContentEl){if(element.parent()[0]===newContentEl.parent()[0]){if(contentElement){contentElement.off("scroll",debouncedContentScroll)}newContentEl.on("scroll",debouncedContentScroll);newContentEl.attr("scroll-shrink","true");contentElement=newContentEl;$$rAF(updateToolbarHeight)}}function updateToolbarHeight(){toolbarHeight=element.prop("offsetHeight");var margin=-toolbarHeight*shrinkSpeedFactor+"px";contentElement.css("margin-top",margin);contentElement.css("margin-bottom",margin);onContentScroll()}function onContentScroll(e){var scrollTop=e?e.target.scrollTop:prevScrollTop;debouncedUpdateHeight();y=Math.min(toolbarHeight/shrinkSpeedFactor,Math.max(0,y+scrollTop-prevScrollTop));element.css($mdConstant.CSS.TRANSFORM,"translate3d(0,"+-y*shrinkSpeedFactor+"px,0)");contentElement.css($mdConstant.CSS.TRANSFORM,"translate3d(0,"+(toolbarHeight-y)*shrinkSpeedFactor+"px,0)");prevScrollTop=scrollTop;if(element.hasClass("md-whiteframe-z1")){if(!y){$timeout(function(){$animate.removeClass(element,"md-whiteframe-z1")})}}else{if(y){$timeout(function(){$animate.addClass(element,"md-whiteframe-z1")})}}}}}}}mdToolbarDirective.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate","$timeout"]})(window,window.angular);